<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax請求練習</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<!-- 可以上網搜尋open data api，例如:政府資料開放平台
    CORS = 跨網域資源共享(後端在用的，要先設定好，前端才能抓的到資料(.json檔)) -->

<body>
    <div>Ajax請求練習--資料來源為本機json</div>
    <ul id="myData"></ul>
    <script>
    // 用ajax呼叫API(https://run.mocky.io/v3/c8c6ed5f-7804-493e-9e78-09cd612fda16)
        $.ajax({
            data: "GET",
            url: "https://run.mocky.io/v3/c8c6ed5f-7804-493e-9e78-09cd612fda16",
            dataType: "json",
            // 成功取得回傳結果
            success: ((data,textStatus,jqXHR) => {
                console.log("success");
                //    console.log("data:" + data);
                //    console.log("textStatus:" + textStatus);
                //    console.log("jqXHR:" + jqXHR);
            // 取得回傳結果然後顯示在頁面上
                let html = "";
                for(let i = 0; i < data.length; i++){
                    html += "<li>" + data[i].strText + "</li>";
                }
                document.getElementById("myData").innerHTML = html;
            }),
            
            // 呼叫API失敗會回傳的值
            error: ((jqXHR, textStatus, errorThrown) => {
                console.log("失敗")
                //    console.log("jqXHR:" + jqXHR);
                //    console.log("textStatus:" + textStatus);
                //    console.log("errorThrow:" + errorThrow);
            }),
            
            
            // 不管成功或失敗都會顯示的值
            complete: ((jqXHR, textStatus) => {
                console.log("complete");
                // console.log("jqXHR:" + jqXHR);
                // console.log("textStatus:" + textStatus);
            })
        })
        
          
    </script>
</body>
</html>